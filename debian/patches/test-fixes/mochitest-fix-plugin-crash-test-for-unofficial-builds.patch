Description: Don't fail when the crash reporter is disabled
Author: Chris Coulson <chris.coulson@canonical.com>
Forwarded: no

Index: firefox-trunk-23.0~a1~hg20130508r131030/dom/plugins/test/mochitest/test_crashing.html
===================================================================
--- firefox-trunk-23.0~a1~hg20130508r131030.orig/dom/plugins/test/mochitest/test_crashing.html	2013-05-08 03:09:08.000000000 +0100
+++ firefox-trunk-23.0~a1~hg20130508r131030/dom/plugins/test/mochitest/test_crashing.html	2013-05-08 23:13:09.286865535 +0100
@@ -13,6 +13,14 @@
       return;
     }
 
+    if (!SpecialPowers.Cc["@mozilla.org/xre/app-info;1"].
+                       getService(SpecialPowers.Ci.nsICrashReporter).
+                       enabled) {
+      ok(true, "Skipping this test when the crash reporter is disabled.");
+      SimpleTest.finish();
+      return;
+    }
+
     SimpleTest.expectChildProcessCrash();
 
     var iframe = document.getElementById('iframe1');
Index: firefox-trunk-23.0~a1~hg20130508r131030/dom/plugins/test/mochitest/test_hanging.html
===================================================================
--- firefox-trunk-23.0~a1~hg20130508r131030.orig/dom/plugins/test/mochitest/test_hanging.html	2013-05-08 03:09:08.000000000 +0100
+++ firefox-trunk-23.0~a1~hg20130508r131030/dom/plugins/test/mochitest/test_hanging.html	2013-05-08 23:13:07.730865527 +0100
@@ -13,6 +13,14 @@
       return;
     }
 
+    if (!SpecialPowers.Cc["@mozilla.org/xre/app-info;1"].
+                       getService(SpecialPowers.Ci.nsICrashReporter).
+                       enabled) {
+      ok(true, "Skipping this test when the crash reporter is disabled.");
+      SimpleTest.finish();
+      return;
+    }
+
     SimpleTest.expectChildProcessCrash();
 
     // the default timeout is annoying high for mochitest runs
